<!DOCTYPE html>
<html lang="th">
<head>
    <%- include('../partials/head') %>
    <title>แดชบอร์ดผู้ป่วย</title>
    <link rel="stylesheet" href="/public/css/main.css">
    <link rel="stylesheet" href="/public/css/patient.css">
</head>
<body>
    <div class="app">
        <%- include('../partials/navbar', { user: user, userRole: userRole, page: 'dashboard' }) %>
        <main class="main-content">
            <h1>ยินดีต้อนรับสู่แดชบอร์ดของคุณ</h1>

            <div class="card">
                <h2>การนัดหมายครั้งถัดไป</h2>
                <% if (appointment) { %>
                    <p><strong>วันที่:</strong> <%= new Date(appointment.visit_date).toLocaleDateString('th-TH') %></p>
                    <p><strong>ทันตแพทย์:</strong> <%= appointment.doctor_name %></p>
                    <a href="/patient/appointments" class="btn">ดูการนัดหมายทั้งหมด</a>
                <% } else { %>
                    <p>คุณไม่มีการนัดหมายเร็วๆ นี้</p>
                    <a href="/patient/appointments" class="btn">ดูการนัดหมายทั้งหมด</a>
                <% } %>
            </div>

            <div class="card">
                <h2>การชำระเงิน</h2>
                <% if (payment) { %>
                    <p><strong>ยอดที่ต้องชำระ:</strong> <%= payment.amount %> บาท</p>
                    <p><strong>สถานะ:</strong> <%= payment.status === 'pending' ? 'ยังไม่ชำระ' : 'ชำระแล้ว' %></p>
                    <a href="/patient/payments" class="btn">ดูประวัติการชำระเงิน</a>
                <% } else { %>
                    <p>คุณไม่มีบิลที่ต้องชำระ</p>
                    <a href="/patient/payments" class="btn">ดูประวัติการชำระเงิน</a>
                <% } %>
            </div>
        </main>
    </div>
</body>
</html>
